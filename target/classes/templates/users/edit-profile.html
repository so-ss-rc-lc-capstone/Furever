<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="partials/header :: head"></head>

<body>
<nav th:replace="partials/navbar :: navbar"></nav>


<div class="flex-container d-flex justify-content-center">
  <div class="row d-flex justify-content-center">
    <h1>Edit Profile</h1>

    <a th:href="@{/about?num=7}">About Page</a>

    <form th:method="POST" th:action="@{/profile/edit}" th:object="${user}" class="flex-column justify-content-center">
      <div class="mb-3">
        <label for="username">Username:</label>
        <input th:field="*{username}" type="text" name="username" id="username" placeholder="Enter username">
      </div>
      <div class="mb-3">
        <label for="email">Email:</label><br>
        <input th:field="*{email}" type="email" name="email" id="email" placeholder="Enter email">
      </div>
      <div class="mb-3">
        <label for="initialPassword">Password:</label>
        <input th:field="*{password}" type="password" name="initialPassword" id="initialPassword" placeholder="Enter password">
      </div>
      <!--                    <div class="mb-3">-->
      <!--                        <label for="confirmPassword">Confirm Password:</label>-->
      <!--                        <input type="password" name="confirmPassword" id="confirmPassword" placeholder="Confirm password">-->
      <!--                    </div>-->

      <div class="mb-3">
        <label for="first_name">First Name:</label>
        <input th:field="*{first_name}" type="text" name="first_name" id="first_name" placeholder="Enter first Name">
      </div>
      <div class="mb-3">
        <label for="last_name">Last Name:</label>
        <input th:field="*{last_name}" type="text" name="last_name" id="last_name" placeholder="Enter last Name">
      </div>
      <div class="mb-3">
        <label for="phone_number">Phone Number:</label>
        <input th:field="*{phone_number}" type="tel" name="phone_number" id="phone_number" placeholder="555-444-1234" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" required>
      </div>

      <div class="mb-3">
        <label for="address">Address:</label>
        <input th:field="*{address}" type="text" name="address" id="address" placeholder="Enter Your Address">
        <div id="suggestions"></div>
      </div>

      <div class="mb-3">
        <label for="zip_code">Zip Code:</label>
        <input th:field="*{zip_code}" type="text" name="zip_code" id="zip_code" placeholder="79332" pattern="[0-9]{5}" required>
      </div>
      <div class="mb-3">
        <label for="bio">Bio:</label>
        <textarea th:field="*{bio}" type="text" name="bio" id="bio" placeholder="Enter Your bio"></textarea>
      </div>
      <div class="d-flex justify-content-center"></div>
      <div class="form-check">
        <input th:field="*{gender}" class="form-check-input" type="radio" name="gender" id="male" value="M" >
        <label class="form-check-label" for="male">
          M
        </label>
      </div>
      <div class="form-check">
        <input th:field="*{gender}" class="form-check-input" type="radio" name="gender" id="female" value="F">
        <label class="form-check-label" for="female">
          F
        </label>
      </div>


      <button class="btn btn-primary">Submit</button>
    </form>

  </div>
</div>





<script>
  const addressInput = document.getElementById("address");
  const suggestionsDiv = document.getElementById("suggestions");
  addressInput.addEventListener("input", () => {
    const address = addressInput.value.trim();
    if (address.length > 0) {
      fetch(`https://api.address-validator.com/suggestions?q=${address}`)
              .then(response => response.json())
              .then(data => {
                suggestionsDiv.innerHTML = "";
                data.forEach(suggestion => {
                  const suggestionDiv = document.createElement("div");
                  suggestionDiv.textContent = suggestion.address;
                  suggestionDiv.addEventListener("click", () => {
                    addressInput.value = suggestion.address;
                    suggestionsDiv.innerHTML = "";
                  });
                  suggestionsDiv.appendChild(suggestionDiv);
                });
              })
              .catch(error => console.error(error));
    } else {
      suggestionsDiv.innerHTML = "";
    }
  });
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Post</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.0.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.4/flowbite.min.css" rel="stylesheet"/>
    <link href="/Users/randychu/Desktop/Software Dev Projects/project-pet/src/main/resources/static/css/searchbar.css"
          rel="stylesheet"/>
    <script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>
    <link href='https://css.gg/css' rel='stylesheet'>

    <!--Mapbox-->
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet'/>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
    <!--direction stuff-->
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.js"></script>
    <link rel="stylesheet"
          href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.css"
          type="text/css">

</head>

<body>
<style>
    #comment-body, #name-body {
        max-width: 100%;
        word-wrap: break-word;
        overflow-wrap: break-word;
        text-overflow: ellipsis;
    }


    @media (max-width: 1095px) {
        aside {
            display: none !important;
        }
    }



    .like-container {
        display: inline-block;
        position: relative;

    }

    .like-icon {
        height: 20px;
        width: 20px;
        transition: transform 0.4s ease-in-out, fill 0.2s ease-in-out, stroke 0.2s ease-in-out;
        stroke: currentColor;
        stroke-width: 1.5;
        fill: none;
    }

    .like-container.clicked .like-icon {
        transform: translateY(-10%) scale(1);
        fill: red;
        stroke: red;
    }


    .like-container.clicked h3 {
        color: red;
    }

    .like-container:hover:not(.clicked) h3 {
        color: red;
    }

    .like-container:hover:not(.clicked) .like-icon path {
        stroke: red;
    }



</style>

<div class="flex flex-col h-screen w-full justify-center items-center">

    <div class="flex w-full justify-start items-center">
        <button class="mx-4 text-blue-500 hover:text-blue-600" onclick="window.history.back()">Go Back</button>
        <div class="flex-1 text-center">
            <h1 class="text-3xl font-bold mr-[2em]">Message</h1>
        </div>
    </div>



    <div class="flex flex-col w-full h-full bg-gray rounded-lg">
        <div class="flex">

            <div class="flex justify-center">
                <img class="w-[55px] h-[55px] mt-[26px] ml-7 rounded-full shadow-md"
                     th:if="${not #strings.isEmpty(post.user.profilePhoto)}"
                     th:src="${post.user.profilePhoto}" alt="Profile image"/>

                <img class="w-[55px] h-[55px] mt-[26px] ml-7 rounded-full shadow-md"
                     th:if="${#strings.isEmpty(post.user.profilePhoto)}"
                     th:src="@{/img/profile.jpeg}"
                     alt="Default profile image"/>
            </div>
            <!--                    th:text="${#temporals.format(event.created_at, 'dd-MMM-yyyy h:mm a')}-->
            <!--Name Date body-->
            <div id="name-body" class = "mt-[20px]">
                <div class="ml-5">
                    <h1 class="font-bold text-[18px] mt-1"> <span th:text="${post.user.first_name}"></span> <span th:text="${post.user.last_name}"></span></h1>

                    <h3 class = "text-blue-400">@ <span th:text="${post.user.username}"></span></h3>
                    <h3 class="text-[10px] text-gray-400 mt-1"><span th:text="${#temporals.format(post.created_at, 'h:mm a')}"></span> ﹒ <span th:text="${#temporals.format(post.created_at, 'dd-MMM-yyyy')}"></span></h3>
                    <div class="w-full pb-5 pt-[5px] ml-[2px]" th:text="${post.body}"></div>
                </div>
            </div>
        </div>

        <div class="w-full h-[60px] pb-3 border-b border-gray-300 flex flex-row justify-around ">

            <div class="flex flex-row justify-center  h-[50px] w-[12em] rounded-md items-center hover:text-blue-500 hover:cursor-pointer transition-all">
                <svg fill="none" class="h-[20px] w-[20px] flex justify-center" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"></path>
                </svg>
                    <button>Comments</button>
            </div>

            <div class="like-container">
                <div class="flex flex-row justify-center  h-[50px] w-[12em]  rounded-md items-center cursor-pointer">
                    <svg class="like-icon" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"></path>
                    </svg>
                    <h3>Like</h3>
                </div>
            </div>
        </div>

        <div class="flex items-center border-b-2">
            <div class="w-1/9 h-full">
                <div class="flex h-full items-center justify-center">
                    <img class="w-[55px] h-[55px] ml-[36px] rounded-full shadow-md"
                         th:if="${not #strings.isEmpty(user.profilePhoto)}"
                         th:src="${user.profilePhoto}" alt="Profile image"/>

                    <img class="w-[55px] h-[55px] ml-[36px] rounded-full shadow-md"
                         th:if="${#strings.isEmpty(user.profilePhoto)}"
                         th:src="@{/img/profile.jpeg}"
                         alt="Default profile image"/>
                </div>
            </div>

            <div class="w-full pt-2 pb-2 h-full flex">
                <form class="w-full" th:action="@{/comment/{id}/create(id=${post.id})}" th:method="POST" th:object="${comments}">
                    <label for="comment" class="sr-only">Your message</label>
                    <div class="flex items-center px-3 py-2 rounded-lg dark:bg-gray-700">

                        <textarea th:field="*{content}" id="comment" name = "content" rows="1" class="resize-none h-[60px] mx-4 p-2.5 w-full text-sm text-gray-900 bg-white rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Your message..."></textarea>

                        <button type="submit"  class="inline-flex justify-center p-2 text-blue-600 rounded-full cursor-pointer hover:bg-blue-100 dark:text-blue-500 dark:hover:bg-gray-600">
                            <svg aria-hidden="true" class="w-6 h-6 rotate-90" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"></path></svg>
                            <span class="sr-only">Send message</span>
                        </button>

                    </div>
                </form>

            </div>

        </div>

        <div th:each="comment : ${post.comments}"  class="w-full flex border-b-2 bg-white shadow-md dark:border-gray-700">
            <div class="flex ml-[5px] justify-center">

                <img class="w-[55px] h-[55px] mt-[26px] ml-7 rounded-full shadow-md"
                     th:if="${not #strings.isEmpty(comment.user.profilePhoto)}"
                     th:src="${comment.user.profilePhoto}"
                     alt="Profile image"/>
                <img class="w-[55px] h-[55px] mt-[26px] ml-7 rounded-full shadow-md"
                     th:if="${#strings.isEmpty(comment.user.profilePhoto)}"
                     th:src="@{/img/profile.jpeg}"
                     alt="Default profile image"/></div>
            <!--                        9:05 AM ﹒ 15 Mar 2023-->
            <div id="comment-body" class="mt-[20px] pl-[1.2em] w-2/3">
                <div class="pt-2 pb-4 pr-3">

                    <div class="flex flex-row">
                        <div class="flex flex-col">
                            <h1 class="font-bold text-[18px]"><span th:text="${comment.user.first_name}"></span> <span th:text="${comment.user.last_name}"></span></h1>
                            <h3 class = "text-blue-400">@ <span th:text="${comment.user.username}"></span></h3>

                            <h3 class="mt-2 text-[10px] text-gray-400"><span th:text="${#temporals.format(comment.created_at, 'h:mm a')}"></span> ﹒ <span th:text="${#temporals.format(comment.created_at, 'dd-MMM-yyyy')}"></span></h3>
                        </div>
                    </div>

                    <div class="w-full pt-3 h-auto" th:text="${comment.content}"></div>

                </div>
            </div>
        </div>




    </div>

        <!--        <div id="name-body" class = "mt-[20px]">-->
<!--            <div class="ml-5">-->
<!--                <p class="text-3xl font-bold text-gray-800" th:text ="${post.body}"></p>-->
<!--                <div th:each="comment : ${post.comments}">-->
<!--                    <div class="flex ml-[5px] justify-center">-->

<!--                        <img class="w-[55px] h-[55px] mt-[26px] ml-7 rounded-full shadow-md"-->
<!--                             th:if="${not #strings.isEmpty(comment.user.profilePhoto)}"-->
<!--                             th:src="${comment.user.profilePhoto}"-->
<!--                             alt="Profile image"/>-->
<!--                        <img class="w-[55px] h-[55px] mt-[26px] ml-7 rounded-full shadow-md"-->
<!--                             th:if="${#strings.isEmpty(comment.user.profilePhoto)}"-->
<!--                             th:src="@{/img/profile.jpeg}"-->
<!--                             alt="Default profile image"/></div>-->
<!--                    &lt;!&ndash;                        9:05 AM ﹒ 15 Mar 2023&ndash;&gt;-->
<!--                    <div id="comment-body" class="mt-[20px] pl-[1.2em] w-2/3">-->
<!--                        <div class="pt-2 pb-4 pr-3">-->

<!--                            <div class="flex flex-row">-->
<!--                                <div class="flex flex-col">-->
<!--                                    <h1 class="font-bold text-[18px]"><span th:text="${comment.user.first_name}"></span> <span th:text="${comment.user.last_name}"></span></h1>-->
<!--                                    <h3 class = "text-blue-400">@ <span th:text="${comment.user.username}"></span></h3>-->

<!--                                    <h3 class="mt-2 text-[10px] text-gray-400"><span th:text="${#temporals.format(comment.created_at, 'h:mm a')}"></span> ﹒ <span th:text="${#temporals.format(comment.created_at, 'dd-MMM-yyyy')}"></span></h3>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            <div class="w-full pt-3 h-auto" th:text="${comment.content}"></div>-->

<!--                        </div>-->
<!--                    </div>-->
<!--            </div>-->
<!--            </div>-->
<!--        </div>-->
    </div>


<script>
    const likeContainer = document.querySelector('.like-container');

    likeContainer.addEventListener('click', function() {
        likeContainer.classList.toggle('clicked');
    });

</script>

</body>
</html>